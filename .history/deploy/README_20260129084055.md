# VPS Deployment Guide (GitHub Version)

## Prerequisites
- VPS with Ubuntu 22.04
- GitHub repo (private or public)
- Domain (from Vanja)

---

## 1. Push to GitHub

```bash
# From local machine
cd d:\PROJECT\NEWTOKECRYPTO
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/YOUR_USERNAME/defense-protocol.git
git push -u origin main
```

---

## 2. First Time VPS Setup

### Edit variables in `setup-vps.sh`:
```bash
DOMAIN="your-domain.com"
GITHUB_REPO="https://github.com/YOUR_USERNAME/defense-protocol.git"
```

### Run on VPS:
```bash
# Upload setup script
scp deploy/setup-vps.sh root@VPS_IP:/root/

# SSH and run
ssh root@VPS_IP
chmod +x setup-vps.sh
./setup-vps.sh
```

**⚠️ SAVE the database password from output!**

---

## 3. Point Domain → VPS

Add DNS records:
```
A    @     → YOUR_VPS_IP
A    www   → YOUR_VPS_IP
```

---

## 4. Enable SSL

```bash
ssh root@VPS_IP
certbot --nginx -d your-domain.com
```

---

## 5. Future Updates

```bash
# On VPS
cd /var/www/defenseprotocol
git pull origin main
bash deploy/update.sh
```

---

## 6. Build Smart Contract

```bash
# On VPS
cd /var/www/defenseprotocol/mission_lock
anchor build
anchor deploy --provider.cluster devnet
```

---

## Useful Commands

| Action | Command |
|--------|---------|
| View logs | `journalctl -u defense-backend -f` |
| Restart backend | `systemctl restart defense-backend` |
| Laravel logs | `tail -f /var/www/defenseprotocol/backend/storage/logs/laravel.log` |
| Nginx logs | `tail -f /var/log/nginx/error.log` |
